<ul class="nav nav-pills navtab-bg font-11 m-l-10 mt-n2">
    <li class="nav-item" id="tab-step-info">
        <a href="#step-info" data-bs-toggle="tab" aria-expanded="false" class="nav-link active">
            <span class="d-inline-block d-sm-none">Step Info</span>
            <span class="d-none d-sm-inline-block">Step Info</span>
        </a>
    </li>
    <li class="nav-item" id="tab-step-parts">
        <a href="#bom" data-bs-toggle="tab" aria-expanded="false" class="nav-link">
            <span class="d-inline-block d-sm-none">Parts used in this Step</span>
            <span class="d-none d-sm-inline-block">Parts used in this Step</span>
        </a>
    </li>
</ul>
<div class="tab-content p-2">
    <div class="tab-pane show active" id="step-info">
        <div class="row">
            <!-- =================================== -->
            <div class="row">
                <div class="col-md-4">
                    <form id="FormRoutingStep" method="post" role="form" class="parsley-examples" onsubmit="return false;">
                        <div class="row">
                            <div class="col-md-12 mb-2" id="DivRoutingName1">
                                ...
                            </div>
                            <label class="form-label col-md-4 mb-2">Step Number  <span class="text-danger">*</span></label>
                            <div class="col-md-8 mb-2">
                                <input id="StepNumber" name="StepNumber" class="form-control form-control-sm" type="text" title="Enter the Step Number as per Company Practice. It has to be Unique" data-plugin="tippy" data-tippy-placement="top" required/>
                            </div>
                            <!-- ---------------  -->
                            <label class="form-label col-md-4 mb-2">Step Description  <span class="text-danger">*</span></label>
                            <div class="col-md-8 mb-2">
                                <textarea id="StepDescription" name="StepDescription" class="form-control form-control-sm" title="Enter the a brief description of the Routing Step" data-plugin="tippy" data-tippy-placement="top" required></textarea>
                            </div>
                            <!-- ---------------  -->
                            <label class="form-label col-md-4 mb-2">Operation  <span class="text-danger">*</span></label>
                            <div class="col-md-8 mb-2">
                                <select id="StepOperation" name="StepOperation" class="form-select form-select-sm" required title="Select the Manufacturing Operation carried out in this Routing Step. The selection of the Operation will decide the documents that need to be generated for carrying out the step. If the Operation does not exist, it would need to be created in the 'Operations' Master" data-plugin="tippy" data-tippy-placement="top">
                                    <option value="">Select</option>
                                </select>
                            </div>
                            <!-- ---------------  -->
                            <label class="form-label col-md-4 mb-2">Step Location  <span class="text-danger">*</span></label>
                            <div class="col-md-8 mb-2">
                                <select id="StepLocation" name="StepLocation" class="form-select form-select-sm" title="Indicate where this Routing Step is carried out - Inhouse or Outsourced" data-plugin="tippy" data-tippy-placement="top" required>
                                    <option value="">Select</option>
                                </select>
                            </div>
                            <label id="lblNumberOfSimMachines" class="form-label col-md-6 mb-1">No of Machines that can run this operation simultaneously </label>
                            <div class="col-md-4 mb-2">
                                <input id="NumberOfSimMachines" name="NumberOfSimMachines" value="1" type="text" title="For Line Balancing reasons if more than 1 machine has to run the Operation Step .... indicate the number of Machines that need to run simultaneously. Those many machines or more have to be added to the list " data-plugin="tippy" data-tippy-placement="top">
                            </div>
                            <!-- ---------------  -->
                            <div class="col-md-3 mb-1   display-none ">
                                <label class="form-label p-r-5">Critical Operation</label>
                                <input class="form-check-input mt-1" type="checkbox" name="......." value="..." title="Machine to run only in 1st shift" data-plugin="tippy" data-tippy-placement="top">
                            </div>
                            <!-- ---------------  -->
                            <div class="col-md-3 mb-1   display-none ">
                                <label class="form-label m-r-5">Critical Setup </label>
                                <input class="form-check-input mt-1" type="checkbox" name="......." value="..." title="Machine to be set only in 1st shift" data-plugin="tippy" data-tippy-placement="top">
                            </div>
                            <!-- ---------------  -->
                            <div class="col-md-12 text-end">
                                <input type="text" hidden id="Status" name="Status" value="Active" />
                                <input type="text"  id="StepId" name="StepId" value="0" />
                                <input type="text"  id="StepRoutingId" name="RoutingId" value="0" />
                                <input type="text" hidden id="StepSequence" name="StepSequence" value="1" />
                                <button id="BtnSaveStep" class="btn btn-sm btn-primary" title="Use to Save the entered data" data-plugin="tippy" data-tippy-placement="top"> Save</button>
                            </div>
                            <!-- ---------------  -->
                        </div>
                        <!-- end row  -->
                    </form>
                    <!-- -------------------------  -->
                </div>
                <!-- ------------------------------------------  -->
                <div class="col-md-1">&nbsp;</div>
                <!-- ------------------------------------------  -->
                <div class="col-md-7">
                    <div class="row">
                        <partial name="_RouteMachines" />
                        <partial name="_RouteSubCons" />
                        <partial name="_DeleteMachine" />
                        <partial name="_DeleteSubCon" />
                        <partial name="_DeleteSupplier" />
                        <!-- =============== -->
                    </div>
                </div>
                <!-- ------------------------------------------  -->
                <hr>
                <div class="col-md-12">
                    <div class="row">
                        <h6 class="mb-2">This Routing step Sequencing with respect to Next Routing Step</h6>
                        <div class="col-md-4">
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tbody>
                                        <tr>
                                            <td>
                                                Sequential : Next Routing step starts only after all parts of this routing step are completed
                                            </td>
                                            <td>
                                                <input class="form-check-input m-l-5" type="radio" name="RadioStepSequence" value="1" checked>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- ======================  -->
                        <div class="col-md-4">
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tbody>
                                        <tr>
                                            <td>
                                                Parallel : Next Routing step can start while this routing step is in progress
                                            </td>
                                            <td>
                                                <input class="form-check-input m-l-5" type="radio" name="RadioStepSequence" title=" This step starts based on Cycle time difference b/w this and Previous step such that both steps run without either machine waiting" data-plugin="tippy" data-tippy-placement="top" value="2">
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- ======================  -->
                        <div class="col-md-4">
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tbody>
                                        <tr>
                                            <td>
                                                Line : Current Routing Step Machine feeds 1 to 1 to the next Routing Step Machine
                                            </td>
                                            <td>
                                                <input class="form-check-input m-l-5" type="radio" name="RadioStepSequence" title="As in case of Line Arrangement" data-plugin="tippy" data-tippy-placement="top" value="3">
                                            </td>
                                            <td>
                                                <button type="button" class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#info-new"><i class="fas fa-info"></i></button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- ======================  -->
                    </div>
                </div>
                <!-- ------------------------------------------  -->
            </div>
            <!-- row end -->
            <!-- ================= -->
            <div class="col-md-12 mt-2 mb-2">
                <div class="accordion" id="accordionExample">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading-One">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Documents List for Routing Step <span class="badge bg-primary rounded-circle noti-icon-badge m-l-5">5</span>
                            </button>
                        </h2>
                        <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="heading-One"
                             data-bs-parent="#accordionExample">
                            <div class="accordion-body">
                                <div class="row">
                                    <div class="table-responsive table-he-180">
                                        <table class="table table-sm table-bordered w-100 mb-3 tableFixHead">
                                            <thead class="table-info th-sti text-center">
                                                <tr class="table-border-bottom">
                                                    <th>File Content / Comment</th>
                                                    <th>Type</th>
                                                    <th>File Name</th>
                                                    <th>Resp Person</th>
                                                    <th>Mandatory</th>
                                                    <th>Approver</th>
                                                    <th>Status</th>
                                                    <th width="5%"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><a href="#" data-bs-toggle="modal" data-bs-target="#view-doc">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</a></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <div class="dropdown float-center">
                                                            <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false"><i class="mdi mdi-dots-vertical"></i></a>
                                                            <div class="dropdown-menu dropdown-menu-end">
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">View</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#add-doc-type-u-edit">Edit/Upload</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">delete</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">Download</a>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <div class="dropdown float-center">
                                                            <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false"><i class="mdi mdi-dots-vertical"></i></a>
                                                            <div class="dropdown-menu dropdown-menu-end">
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">View</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#add-doc-type-u-edit">Edit/Upload</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">delete</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">Download</a>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <div class="dropdown float-center">
                                                            <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false"><i class="mdi mdi-dots-vertical"></i></a>
                                                            <div class="dropdown-menu dropdown-menu-end">
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">View</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#add-doc-type-u-edit">Edit/Upload</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">delete</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">Download</a>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <div class="dropdown float-center">
                                                            <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false"><i class="mdi mdi-dots-vertical"></i></a>
                                                            <div class="dropdown-menu dropdown-menu-end">
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">View</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#add-doc-type-u-edit">Edit/Upload</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">delete</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">Download</a>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td></td>
                                                    <td>
                                                        <div class="dropdown float-center">
                                                            <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false"><i class="mdi mdi-dots-vertical"></i></a>
                                                            <div class="dropdown-menu dropdown-menu-end">
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">View</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#add-doc-type-u-edit">Edit/Upload</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">delete</a>
                                                                <!-- item-->
                                                                <a href="javascript:void(0);" class="dropdown-item">Download</a>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-md-12">
                                        <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#add-doc-type-u" title="Select to add another Document" data-plugin="tippy" data-tippy-placement="top">Add Document</button>
                                    </div>
                                </div>
                                <!-- end row -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end accordian  -->
            </div>
        </div>
        <!-- end row -->
        <div class="row   display-none ">
            <!-- ================= -->
            <label class="form-label col-md-2 mt-2 mb-2">Approver Notes</label>
            <div class="col-md-9 mt-2 mb-2">
                <textarea class="form-control form-control-sm">Enter......</textarea>
            </div>
            <!-- ---------------  -->
            <label class="form-label col-md-2 mb-2">Approver Status</label>
            <div class="col-md-4 mb-2">
                <select class="form-select form-select-sm">
                    <option value="">Approved</option>
                    <option value="">Needs Rework</option>
                </select>
            </div>
            <!-- ---------------  -->
        </div>
        <!-- end row -->
        <hr class="hr-color-2">
        <div class="row">
            <div class="col-md-6">
                <button type="button" class="btn btn-warning btn-sm   display-none " data-bs-toggle="modal" data-bs-target="#add-document-2"><i class="fas fa-info"></i></button>
                <button type="button" class="btn btn-purple btn-sm   display-none " data-bs-toggle="modal" data-bs-target="#task-rou">Task</button>
            </div>
            <!-- ---------- -->
            <div class="col-md-6 text-end">
                <button class="btn btn-sm btn-dark" data-bs-toggle="modal" data-bs-target="#popup-4" title="Use to Exit " data-plugin="tippy" data-tippy-placement="top">Exit</button>
                <button class="btn btn-sm btn-primary" title="Use to Save the entered data" data-plugin="tippy" data-tippy-placement="top">Save</button>
                <button type="button" class="btn btn-warning btn-sm"><i class="fas fa-arrow-right"></i></button>
                <button hidden class="btn btn-sm btn-info" title="Use to go to the next Tab" data-plugin="tippy" data-tippy-placement="top">Add Next Step</button>
            </div>
        </div>
        <!-- row end -->
    </div>

    <div class="tab-pane" id="bom">
        <!-- ======================================================================================== -->
        <div class="row">
            <div class="col-md-8">
                <h5>Select parts for Assembly from BOM </h5>
                <div class="table-responsive table-he-250 mt-2">
                    <table id="StepPart-BOM-Table" class="table table-sm table-bordered w-100 mb-1 tableFixHead">
                        <thead class="table-info th-sti text-center" title="Use this Tab to enter BOM Parts are used in this Routing Step. This Tab is enabled when the Operation is a joining, assembly ... type of operation" data-plugin="tippy" data-tippy-placement="top">
                            <tr class="table-border-bottom">
                                <th></th>
                                <th>Part NO</th>
                                <th>Part Description</th>
                                <th>BOM Qnty</th>
                                <th>Bal Qnty for Assembly</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
         </div>
        <div class="row mt-3">
            <!-- end col -->
            <div class="col-md-9 text-end mt-n4">
                <button id="BtnSelectBOMForRouting" class="btn btn-sm btn-purple" title="Use to select the chosen Part No for further data entry" data-plugin="tippy" data-tippy-placement="top"> Select</button>
            </div>
            <!-- end col -->
        </div>
        <!-- --- end row ------  -->
        <form method="post" id="FormStepPart" role="form" onsubmit="return false;">
        <div class="row mt-3">
                
            <label class="form-label col-md-1 mb-1"> Part No  </label>
            <div class="col-md-2 mb-1">
                <input type="text" hidden id="PartId" name="PartId" value="0"/>
                <input type="text" id="BOMPartNo" name="PartNo" class="form-control form-control-sm" placeholder="" value="" required/>
            </div>
            <!-- ================= -->
            <label class="form-label col-md-1 mb-2"> Part Desc</label>
            <div class="col-md-3 mb-2">
                <textarea id="BOMPartDescription" name="PartDescription" class="form-control form-control-sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry. </textarea>
            </div>
                
            <!-- ================= -->
            <label class="form-label col-md-1 mb-2">Qnty for Assy </label>
            <div class="col-md-2 mb-2">
                <input id="QuantityAssembly" name="QuantityAssembly" type="text" oninput="return onlyNum();" class="form-control form-control-sm" title="Enter the quantity of selected Part No used in this Routing Step Operation. Note it should be equal or less than the Balance Qnty for Assembly" data-plugin="tippy" data-tippy-placement="top" />
            </div>
                
            <!-- ========================== -->
            <div class="col-md-2 mb-2">
                <input type="text" hidden id="BOMId" name="BOMId" value="0" />
                <input type="text" hidden id="BOMManufacturedPartId" name="ManufacturedPartId" value="0" />
                <input type="text" hidden id="BOMRoutingStepId" name="RoutingStepId" value="0" />
                <input type="text" hidden id="RoutingStepPartId" name="StepPartId" value="0" />
                <input type="submit" id="BtnAddToStepList" class="btn btn-sm btn-primary" title="Use to add to the Part List for the Routing Step" data-plugin="tippy" data-tippy-placement="top" value="Add to List">
            </div>
            <!-- ========================== -->
        </div>
        </form>
        
        <!-- end row  -->
        <div class="row">
            <div class="col-md-8">
                <h5 class="mb-2">List of parts Assembled in Current Assy Step</h5>
                <div class="table-responsive table-he-180 mt-2">
                    <table id="StepPart-BOMQTY-Table" class="table table-sm table-bordered w-100 mb-3 tableFixHead">
                        <thead class="table-info th-sti text-center">
                            <tr class="table-border-bottom">
                                <th>Part NO</th>
                                <th>Part Description</th>
                                <th> Qnty used</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- end col -->
        </div>
        <!-- end row  -->
        <hr class="hr-color-2">
        <div class="row mt-2">
            <div class="col-md-6">
                <button type="button" class="btn btn-warning btn-sm" title="Use to go to Previous Tab" data-plugin="tippy" data-tippy-placement="top"><i class="fas fa-arrow-left"></i></button>
            </div>
            <!-- ---------- -->
            <div class="col-md-6 text-end">
                <button class="btn btn-sm btn-dark" data-bs-toggle="modal" data-bs-target="#popup-4" title="Use to Exit " data-plugin="tippy" data-tippy-placement="top">Exit</button>
                <button class="btn btn-sm btn-primary" title="Use to Save the entered data" data-plugin="tippy" data-tippy-placement="top">Save</button>
                <button type="button" class="btn btn-warning btn-sm"><i class="fas fa-arrow-right" title="Use to go to the next Tab" data-plugin="tippy" data-tippy-placement="top"></i></button>
            </div>
        </div>
        <!-- end row  -->
    </div>
   
</div>

<partial name="_Add-Machine" />
<partial name="_Add-SubCon" />


<template id="RT_BOM-template">
    <tr sclass ="bg-grey">
        <td>
            <input class="form-check-input" type="radio" id="BOMChk_{mpbomId}" name="BOMChk" value={mpbomId} title="Use to Choose the Part No" data-plugin="tippy" data-tippy-placement="bottom" checked>
        </td>
        <td data-key="RT_BOMPartNo">{bomPartNo}</td>
        <td data-key="RT_BOMPartDesc">{bomPartDesc}</td>
        <td data-key="RT_BOMQty">{quantity}</td>
        <td data-key="RT_BOMQty">{balanceQuantity}</td>
    </tr>
</template>


<template id="RT_BOMQTY-template">
    <tr sclass="bg-grey">
        <td data-key="RT_BOMPartNo">{bomPartNo}</td>
        <td data-key="RT_BOMPartDesc">{bomPartDesc}</td>
        <td data-key="RT_BOMQty">{quantityUsed}</td>
        <td>
            <div class="dropdown float-center">
                <a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false"><i class="mdi mdi-dots-vertical"></i></a>
                <div class="dropdown-menu dropdown-menu-end">
                    <a href="javascript:void(0);" onclick="DeleteStepPart({stepPartId},{routingStepId});" class="dropdown-item">delete</a>
                    <a href="javascript:void(0);" 
                    onclick="SetBOMEditVals({stepPartId},{routingStepId}
                             ,'{bomPartNo}',{mpbomId},'{bomPartDesc}',{quantityUsed});" class="dropdown-item">Edit</a>
                </div>
            </div>
        </td>
    </tr>
</template>
<!--
    balanceQuantity:0
    bomManufPartId:56
    bomPartDesc:"M3 x 15 Length Grub Screw"
    bomPartId:60
    bomPartNo:"M3x15 GS"
    mpbomId:19
    quantity:0
    quantityUsed:1
    routingStepId:171
    stepPartId:16
    tenantId:0-->
<!--//BOMPartNo,BOMPartDescription,QuantityAssembly
                    //BOMId,BOMManufacturedPartId
                    //BOMRoutingStepId
                    //RoutingStepPartId
                    -->
